"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),videoResize=function(){function t(t,e){return t?t:e}function e(t){return t?t.x?t.y||(t.y=0):t.x=0:t={x:.5,y:.5},t}function n(){return document.head.appendChild(document.createElement("style"))}function i(t,e,n){var i={x:A(n.x),y:A(n.y)};t.sheet.insertRule(e+" { -webkit-transform: translate(-"+i.x+"%, -"+i.y+"%); -moz-transform: translate(-"+i.x+"%, -"+i.y+"%); -ms-transform: translate(-"+i.x+"%, -"+i.y+"%); -o-transform: translate(-"+i.x+"%, -"+i.y+"%); transform: translate(-"+i.x+"%, -"+i.y+"%); top: "+i.y+"%; left: "+i.x+"%; }",0)}function r(t,e,n){t.sheet.insertRule(e+".hrh { height: "+n+"%; }",0),t.sheet.insertRule(e+".hrw { width: "+n+"%; }",0),t.sheet.insertRule(e+".vrh { height: "+n+"%; }",0),t.sheet.insertRule(e+".vrw { width: "+n+"%; }",0)}function s(t,e,n,i,r,s,u){if(o(r))!function(){var r=a("img",t,e,s);t.element=r,r.onload=function(){f(t,r,n,i,u)}}();else{var l=a("video",t,e,s);t.element=l,e=l,t.element.muted=t.muted,0===e.readyState?e.addEventListener("loadedmetadata",function(r){f(t,e,n,i,u)}):e.readyState>=1&&f(t,e,n,i,u)}}function o(t){return window.innerWidth<=t}function a(t,e,n,i){return"video"==t?u(e,n,i):p(e,n,i)}function u(t,e,n){var i=x("video");return i.setAttribute("id",t.name.substring(1)),i.setAttribute("autoplay",t.autoplay),i.setAttribute("loop",t.loop),m(e,i,t.container),l(t,i,n),i}function l(t,e,n){if(Array.isArray(n))for(var i=0;i<n.length;i+=1)c(e,n[i]);else c(e,n)}function c(t,e){var n=x("source");n.setAttribute("src",e);var i=h(e),r="ogv"===i?"ogg":i;n.setAttribute("type","video/"+r),t.appendChild(n)}function h(t){var e=t.split(".");return e[e.length-1]}function f(t,e,n,i,r){e.style.position="absolute",d(e),t.ratio=b(e,t),y(t,e,n.clientWidth,n.clientHeight,t.ratio,i),S(e)}function d(t){t.style.width="",t.style.height=""}function m(t,e,n){n.appendChild(e),n.removeChild(t)}function y(t,e,n,i,r,s){n>=i?v(t,e,"hr",n,i,r,s):v(t,e,"vr",n,i,r,s)}function v(t,e,n,i,r,s,o){i>r&&"height"===o||r>=i/s&&"cover"===o?(w(e),C(e,n+"h"),t.currentClass=n+"h"):(w(e),C(e,n+"w"),t.currentClass=n+"w")}function p(t,e,n){0==t.sources&&g(e);var i=x("img");return i.setAttribute("src",t.poster),i.setAttribute("id",t.name.substring(1)),i.style.opacity=0,m(e,i,t.container),i}function g(t){for(var e=t.querySelectorAll("source"),n=0;n<e.length;n+=1)t.removeChild(e[n]),t.load()}function b(t){return k(t.clientWidth,t.clientHeight)}function w(t){return t.className=""}function C(t,e){return t.classList.add(e)}function x(t){return document.createElement(t)}function k(t,e){return t/e}function A(t){return 100*t}function S(t){return t.style.opacity=0==t.style.opacity?1:0}function z(t){window.onresize=function(){return W.videos[t].resize()}}function R(t){return new _(t)}var E=function B(){_classCallCheck(this,B),this.videos=[]},_=function(){function o(n){_classCallCheck(this,o),this.name=n.element,this.element=document.querySelector(n.element),this.container=this.element.parentElement,this.sources=t(n.sources,!1),this.loop=t(n.loop,!1),this.autoplay=t(n.autoplay,!1),this.muted=t(n.mute,!1),this.poster=t(n.poster,!1),this.currentClass="",this.scale=t(n.scale,1),this.alignment=e(n.align),this.fit=t(n.fit,"cover"),this.mobileBreak=t(n.mobileBreak,1024),this.updateStyles(),W.videos.push(this),this.index=W.videos.length-1,this.active=!1}return _createClass(o,[{key:"updateStyles",value:function(){var t=n();r(t,this.name,100*this.scale),i(t,this.name,this.alignment)}},{key:"update",value:function(){this.updateStyles(),this.resize()}},{key:"resize",value:function(){y(this,this.element,this.container.clientWidth,this.container.clientHeight,this.ratio,this.fit)}},{key:"init",value:function(){this.active?this.update():(s(this,this.element,this.container,this.fit,this.mobileBreak,this.sources,this.name),z(this.index),this.active=!0)}}]),o}(),W=new E;return{video:R}}();